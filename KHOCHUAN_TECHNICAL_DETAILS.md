# Khochuan POS - Chi ti·∫øt K·ªπ thu·∫≠t

## üîß C√¥ng ngh·ªá s·ª≠ d·ª•ng

### Frontend
- **Framework**: React 18+ v·ªõi React Router 6
- **State Management**: Context API + Custom Hooks
- **UI Framework**: Custom UI v·ªõi h·ªó tr·ª£ t·ª´ Tailwind CSS
- **API Communication**: Axios, React Query
- **Real-time**: WebSockets, Socket.IO
- **Visualization**: Chart.js, D3.js
- **Build Tools**: Vite
- **Testing**: Jest, React Testing Library

### Backend
- **Runtime**: Node.js 18+
- **Framework**: Express.js
- **Database**: PostgreSQL
- **ORM**: Prisma
- **Authentication**: JWT, OAuth 2.0
- **WebSockets**: Socket.IO
- **API Documentation**: OpenAPI/Swagger
- **Testing**: Jest, Supertest
- **Task Queue**: Bull, Redis
- **Logging**: Winston, Pino

### DevOps & Deployment
- **CI/CD**: GitHub Actions
- **Hosting**: Cloudflare Pages (Frontend), Cloudflare Workers (Backend)
- **Database Hosting**: Managed PostgreSQL (Supabase/Neon)
- **Monitoring**: Datadog, Sentry
- **Containers**: Docker

## üîê B·∫£o m·∫≠t

### Authentication
- JWT (JSON Web Tokens) v·ªõi refresh token
- Multi-factor Authentication (MFA)
- Role-based Access Control (RBAC)
- OAuth 2.0 integration
- Session timeout & management

### Data Protection
- End-to-end encryption cho d·ªØ li·ªáu nh·∫°y c·∫£m
- M√£ h√≥a th√¥ng tin thanh to√°n (PCI DSS compliant)
- M√£ h√≥a d·ªØ li·ªáu l∆∞u tr·ªØ
- Data masking cho th√¥ng tin nh·∫°y c·∫£m

### API Security
- Rate limiting
- CORS configuration
- API keys & scopes
- Input validation & sanitization
- Brute force protection

## ü§ñ T√≠nh nƒÉng AI

### Ph√¢n kh√∫c kh√°ch h√†ng (Customer Segmentation)
- **Thu·∫≠t to√°n**: K-means clustering, RFM analysis
- **D·ªØ li·ªáu**: L·ªãch s·ª≠ mua h√†ng, gi√° tr·ªã ƒë∆°n h√†ng, t·∫ßn su·∫•t mua
- **K·∫øt qu·∫£**: Ph√¢n lo·∫°i kh√°ch h√†ng VIP, th∆∞·ªùng xuy√™n, ti·ªÅm nƒÉng, kh√¥ng ho·∫°t ƒë·ªông

### D·ª± b√°o nhu c·∫ßu (Demand Forecasting)
- **Thu·∫≠t to√°n**: LSTM (Long Short-Term Memory), ARIMA
- **D·ªØ li·ªáu**: L·ªãch s·ª≠ b√°n h√†ng, m√πa v·ª•, xu h∆∞·ªõng th·ªã tr∆∞·ªùng
- **K·∫øt qu·∫£**: D·ª± b√°o nhu c·∫ßu s·∫£n ph·∫©m, t·ªëi ∆∞u t·ªìn kho

### T·ªëi ∆∞u gi√° (Price Optimization)
- **Thu·∫≠t to√°n**: Reinforcement Learning, Random Forest
- **D·ªØ li·ªáu**: Gi√° c·∫£ l·ªãch s·ª≠, elasticity, c·∫°nh tranh, m√πa v·ª•
- **K·∫øt qu·∫£**: ƒê·ªÅ xu·∫•t gi√° t·ªëi ∆∞u cho l·ª£i nhu·∫≠n v√† doanh s·ªë

### G·ª£i √Ω s·∫£n ph·∫©m (Product Recommendations)
- **Thu·∫≠t to√°n**: Collaborative Filtering, Matrix Factorization
- **D·ªØ li·ªáu**: L·ªãch s·ª≠ mua h√†ng, s·∫£n ph·∫©m li√™n quan
- **K·∫øt qu·∫£**: G·ª£i √Ω cross-sell, up-sell, b√°n k√®m

## üéÆ Game h√≥a (Gamification)

### H·ªá th·ªëng ƒëi·ªÉm & c·∫•p ƒë·ªô
- ƒêi·ªÉm kinh nghi·ªám (XP) cho m·ªói ƒë∆°n h√†ng
- C·∫•p ƒë·ªô nh√¢n vi√™n (t·ª´ T√¢n binh ƒë·∫øn Chuy√™n gia)
- ƒêi·ªÉm th∆∞·ªüng ƒë·∫∑c bi·ªát cho th√†nh t√≠ch n·ªïi b·∫≠t

### Th√†nh t√≠ch & huy hi·ªáu
- Huy hi·ªáu theo m·ª•c ti√™u doanh s·ªë
- Huy hi·ªáu theo k·ªπ nƒÉng b√°n h√†ng
- Huy hi·ªáu s·∫£n ph·∫©m (expertise badges)
- Th√†nh t√≠ch ƒë·∫∑c bi·ªát (First Sale, Milestone Sales)

### Th·ª≠ th√°ch & nhi·ªám v·ª•
- Nhi·ªám v·ª• h√†ng ng√†y
- Th·ª≠ th√°ch h√†ng tu·∫ßn
- Chi·∫øn d·ªãch b√°n h√†ng theo m√πa
- Th·ª≠ th√°ch ƒë·ªôi nh√≥m

### B·∫£ng x·∫øp h·∫°ng & ph·∫ßn th∆∞·ªüng
- B·∫£ng x·∫øp h·∫°ng theo doanh s·ªë
- B·∫£ng x·∫øp h·∫°ng theo s·ªë l∆∞·ª£ng ƒë∆°n h√†ng
- Ph·∫ßn th∆∞·ªüng th·ª±c (ti·ªÅn th∆∞·ªüng, ng√†y ngh·ªâ)
- Ph·∫ßn th∆∞·ªüng ·∫£o (huy hi·ªáu, danh hi·ªáu)

## üíæ C·∫•u tr√∫c Database

### B·∫£ng ch√≠nh
1. **users**: Ng∆∞·ªùi d√πng h·ªá th·ªëng
   - id, email, password_hash, name, role, created_at, updated_at

2. **products**: S·∫£n ph·∫©m
   - id, name, sku, barcode, description, price, cost, tax_rate, category_id, supplier_id, created_at, updated_at

3. **inventory**: T·ªìn kho
   - id, product_id, quantity, location_id, last_counted_at, created_at, updated_at

4. **categories**: Danh m·ª•c s·∫£n ph·∫©m
   - id, name, parent_id, image_url, created_at, updated_at

5. **customers**: Kh√°ch h√†ng
   - id, name, email, phone, address, loyalty_points, segment, created_at, updated_at

6. **orders**: ƒê∆°n h√†ng
   - id, customer_id, cashier_id, total, tax, discount, payment_method, status, created_at, updated_at

7. **order_items**: Chi ti·∫øt ƒë∆°n h√†ng
   - id, order_id, product_id, quantity, price, discount, created_at, updated_at

8. **payments**: Thanh to√°n
   - id, order_id, amount, method, status, reference, created_at, updated_at

9. **staff**: Nh√¢n vi√™n
   - id, user_id, position, hire_date, manager_id, commission_rate, created_at, updated_at

10. **staff_performance**: Hi·ªáu su·∫•t nh√¢n vi√™n
    - id, staff_id, sales, orders_count, average_order_value, period, created_at, updated_at

11. **gamification_achievements**: Th√†nh t√≠ch game h√≥a
    - id, staff_id, achievement_id, unlocked_at, created_at, updated_at

12. **suppliers**: Nh√† cung c·∫•p
    - id, name, contact, email, phone, address, created_at, updated_at

### B·∫£ng ph·ª•
1. **sessions**: Phi√™n l√†m vi·ªác
   - id, cashier_id, start_time, end_time, starting_cash, ending_cash, status

2. **price_history**: L·ªãch s·ª≠ gi√°
   - id, product_id, price, effective_date, created_by

3. **inventory_transactions**: Giao d·ªãch t·ªìn kho
   - id, product_id, quantity, type, reference, notes, created_by, created_at

4. **customer_segments**: Ph√¢n kh√∫c kh√°ch h√†ng
   - id, name, criteria, created_at, updated_at

5. **loyalty_transactions**: Giao d·ªãch ƒëi·ªÉm th∆∞·ªüng
   - id, customer_id, points, type, reference, created_at, updated_at

6. **price_rules**: Quy t·∫Øc gi√°
   - id, name, product_id, customer_segment_id, discount_type, discount_value, start_date, end_date

7. **audit_logs**: Nh·∫≠t k√Ω ki·ªÉm to√°n
   - id, user_id, action, entity, entity_id, details, ip_address, created_at

## üîå T√≠ch h·ª£p API

### POS Hardware
- **M√°y in h√≥a ƒë∆°n**: ESCPOS, Star, Epson
- **M√°y qu√©t m√£ v·∫°ch**: USB HID, Bluetooth
- **NgƒÉn k√©o ti·ªÅn**: K·∫øt n·ªëi qua m√°y in
- **Terminal thanh to√°n**: SDK thanh to√°n

### T√≠ch h·ª£p thanh to√°n
- VNPay
- MoMo
- ZaloPay
- Stripe
- Paypal

### T√≠ch h·ª£p th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠
- Shopee
- Lazada 
- Tiki
- WooCommerce
- Shopify

### T√≠ch h·ª£p kh√°c
- Zalo OA
- Google Analytics
- Facebook Pixel
- Email marketing (SendGrid)
- SMS Gateway (Twilio)

## üìä C√°c lo·∫°i b√°o c√°o

### B√°o c√°o b√°n h√†ng
- Doanh s·ªë theo th·ªùi gian (gi·ªù, ng√†y, tu·∫ßn, th√°ng)
- Doanh s·ªë theo danh m·ª•c
- Doanh s·ªë theo s·∫£n ph·∫©m
- Doanh s·ªë theo nh√¢n vi√™n
- Doanh s·ªë theo ph∆∞∆°ng th·ª©c thanh to√°n
- Ph√¢n t√≠ch khuy·∫øn m√£i & gi·∫£m gi√°

### B√°o c√°o t·ªìn kho
- T√¨nh tr·∫°ng t·ªìn kho
- S·∫£n ph·∫©m s·∫Øp h·∫øt
- Ph√¢n t√≠ch ABC
- L·ªãch s·ª≠ nh·∫≠p/xu·∫•t kho
- Gi√° tr·ªã t·ªìn kho
- Tu·ªïi t·ªìn kho

### B√°o c√°o kh√°ch h√†ng
- Kh√°ch h√†ng theo ph√¢n kh√∫c
- Gi√° tr·ªã v√≤ng ƒë·ªùi kh√°ch h√†ng (LTV)
- T·ª∑ l·ªá gi·ªØ ch√¢n kh√°ch h√†ng
- H√†nh vi mua h√†ng
- ƒêi·ªÉm trung th√†nh & s·ª≠ d·ª•ng
- T·∫ßn su·∫•t mua h√†ng

### B√°o c√°o hi·ªáu su·∫•t
- Hi·ªáu su·∫•t nh√¢n vi√™n
- Th·ªùi gian x·ª≠ l√Ω ƒë∆°n h√†ng
- T·ª∑ l·ªá chuy·ªÉn ƒë·ªïi
- Ph√¢n t√≠ch gi·ªè h√†ng b·ªã b·ªè
- KPIs theo vai tr√≤
- Ph√¢n t√≠ch th·ªùi gian cao ƒëi·ªÉm 